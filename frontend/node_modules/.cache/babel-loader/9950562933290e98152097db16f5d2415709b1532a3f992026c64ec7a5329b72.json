{"ast":null,"code":"import _regeneratorRuntime from\"/home/marc/exercise/projects/airbnb/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/marc/exercise/projects/airbnb/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/marc/exercise/projects/airbnb/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// frontend/src/components/LoginFormModal/index.js\nimport React,{useState}from\"react\";import*as sessionActions from\"../../store/session\";import{useDispatch}from\"react-redux\";import{useModal}from\"../../context/Modal\";import\"./LoginForm.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function LoginFormModal(){var dispatch=useDispatch();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),credential=_useState2[0],setCredential=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useModal=useModal(),closeModal=_useModal.closeModal;var handleSubmit=function handleSubmit(e){e.preventDefault();setErrors([]);return dispatch(sessionActions.login({credential:credential,password:password})).then(closeModal).catch(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.json();case 2:data=_context.sent;if(data&&data.errors)setErrors(data.errors);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Log In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"ul\",{children:errors.map(function(error,idx){return/*#__PURE__*/_jsx(\"li\",{children:error},idx);})}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Username or Email\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:credential,onChange:function onChange(e){return setCredential(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Log In\"})]})]});}export default LoginFormModal;","map":{"version":3,"names":["React","useState","sessionActions","useDispatch","useModal","LoginFormModal","dispatch","credential","setCredential","password","setPassword","errors","setErrors","closeModal","handleSubmit","e","preventDefault","login","then","catch","res","json","data","map","error","idx","target","value"],"sources":["/home/marc/exercise/projects/airbnb/frontend/src/components/LoginFormModal/index.js"],"sourcesContent":["// frontend/src/components/LoginFormModal/index.js\nimport React, { useState } from \"react\";\nimport * as sessionActions from \"../../store/session\";\nimport { useDispatch } from \"react-redux\";\nimport { useModal } from \"../../context/Modal\";\nimport \"./LoginForm.css\";\n\nfunction LoginFormModal() {\n  const dispatch = useDispatch();\n  const [credential, setCredential] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errors, setErrors] = useState([]);\n  const { closeModal } = useModal();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrors([]);\n    return dispatch(sessionActions.login({ credential, password }))\n      .then(closeModal)\n      .catch(\n        async (res) => {\n          const data = await res.json();\n          if (data && data.errors) setErrors(data.errors);\n        }\n      );\n  };\n\n  return (\n    <>\n      <h1>Log In</h1>\n      <form onSubmit={handleSubmit}>\n        <ul>\n          {errors.map((error, idx) => (\n            <li key={idx}>{error}</li>\n          ))}\n        </ul>\n        <label>\n          Username or Email\n          <input\n            type=\"text\"\n            value={credential}\n            onChange={(e) => setCredential(e.target.value)}\n            required\n          />\n        </label>\n        <label>\n          Password\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n          />\n        </label>\n        <button type=\"submit\">Log In</button>\n      </form>\n    </>\n  );\n}\n\nexport default LoginFormModal;\n"],"mappings":"sZAAA;AACA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,GAAKC,eAAc,KAAM,qBAAqB,CACrD,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,QAAQ,KAAQ,qBAAqB,CAC9C,MAAO,iBAAiB,CAAC,6IAEzB,QAASC,eAAc,EAAG,CACxB,GAAMC,SAAQ,CAAGH,WAAW,EAAE,CAC9B,cAAoCF,QAAQ,CAAC,EAAE,CAAC,wCAAzCM,UAAU,eAAEC,aAAa,eAChC,eAAgCP,QAAQ,CAAC,EAAE,CAAC,yCAArCQ,QAAQ,eAAEC,WAAW,eAC5B,eAA4BT,QAAQ,CAAC,EAAE,CAAC,yCAAjCU,MAAM,eAAEC,SAAS,eACxB,cAAuBR,QAAQ,EAAE,CAAzBS,UAAU,WAAVA,UAAU,CAElB,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAC1BA,CAAC,CAACC,cAAc,EAAE,CAClBJ,SAAS,CAAC,EAAE,CAAC,CACb,MAAON,SAAQ,CAACJ,cAAc,CAACe,KAAK,CAAC,CAAEV,UAAU,CAAVA,UAAU,CAAEE,QAAQ,CAARA,QAAS,CAAC,CAAC,CAAC,CAC5DS,IAAI,CAACL,UAAU,CAAC,CAChBM,KAAK,4FACJ,iBAAOC,GAAG,mJACWA,IAAG,CAACC,IAAI,EAAE,QAAvBC,IAAI,eACV,GAAIA,IAAI,EAAIA,IAAI,CAACX,MAAM,CAAEC,SAAS,CAACU,IAAI,CAACX,MAAM,CAAC,CAAC,sDACjD,+DACF,CACL,CAAC,CAED,mBACE,wCACE,8BAAe,cACf,cAAM,QAAQ,CAAEG,YAAa,wBAC3B,oBACGH,MAAM,CAACY,GAAG,CAAC,SAACC,KAAK,CAAEC,GAAG,qBACrB,oBAAeD,KAAK,EAAXC,GAAG,CAAc,EAC3B,CAAC,EACC,cACL,0DAEE,cACE,IAAI,CAAC,MAAM,CACX,KAAK,CAAElB,UAAW,CAClB,QAAQ,CAAE,kBAACQ,CAAC,QAAKP,cAAa,CAACO,CAAC,CAACW,MAAM,CAACC,KAAK,CAAC,EAAC,CAC/C,QAAQ,OACR,GACI,cACR,iDAEE,cACE,IAAI,CAAC,UAAU,CACf,KAAK,CAAElB,QAAS,CAChB,QAAQ,CAAE,kBAACM,CAAC,QAAKL,YAAW,CAACK,CAAC,CAACW,MAAM,CAACC,KAAK,CAAC,EAAC,CAC7C,QAAQ,OACR,GACI,cACR,eAAQ,IAAI,CAAC,QAAQ,oBAAgB,GAChC,GACN,CAEP,CAEA,cAAetB,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}