{"ast":null,"code":"import { csrfFetch } from \"./csrf\";\nconst LOAD = 'reviews/LOAD';\nconst load = reviews => ({\n  type: LOAD,\n  reviews\n});\nexport const getReviews = id => async dispatch => {\n  console.log('hello from thunk');\n  const response = await csrfFetch(`/api/reviews/${id}/reviews`);\n  if (response.ok) {\n    console.log('inside response.ok');\n    const Reviews = await response.json();\n    dispatch(load(Reviews));\n    console.log(\"reviews in thunk: \", Reviews);\n    return Reviews;\n  }\n  return response;\n};\nconst intialState = {\n  spots: {},\n  user: {}\n};\nconst reviewReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : intialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case LOAD:\n      {\n        const newState = {\n          ...state,\n          spots: {}\n        };\n        let reviewsNormalize = {};\n        action.reviews.forEach(review => {\n          reviewsNormalize[review.id] = review;\n        });\n        newState.spots = reviewsNormalize;\n        return newState;\n      }\n    default:\n      return state;\n  }\n};\nexport default reviewReducer;","map":{"version":3,"names":["csrfFetch","LOAD","load","reviews","type","getReviews","id","dispatch","console","log","response","ok","Reviews","json","intialState","spots","user","reviewReducer","state","action","newState","reviewsNormalize","forEach","review"],"sources":["/home/marc/exercise/projects/airbnb/frontend/src/store/reviewReducer.js"],"sourcesContent":["import { csrfFetch } from \"./csrf\"\n\nconst LOAD = 'reviews/LOAD'\n\n\nconst load = reviews => ({\n    type: LOAD,\n    reviews\n})\n\n\nexport const getReviews = (id) => async dispatch => {\n    console.log('hello from thunk')\n    const response = await csrfFetch(`/api/reviews/${id}/reviews`);\n\n    if (response.ok){\n        console.log('inside response.ok')\n        const Reviews = await response.json();\n        dispatch(load(Reviews))\n        console.log(\"reviews in thunk: \", Reviews)\n        return Reviews\n    }\n    return response\n}\n\nconst intialState = {spots:{}, user: {}}\n\nconst reviewReducer = (state = intialState, action) => {\n    switch (action.type) {\n        case LOAD:{\n\n            const newState = {...state, spots: {}}\n            let reviewsNormalize = {};\n            action.reviews.forEach(review => {\n                reviewsNormalize[review.id] = review\n            });\n            newState.spots = reviewsNormalize\n            return newState\n        }\n        default:\n            return state\n    }\n}\n\nexport default reviewReducer\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,QAAQ;AAElC,MAAMC,IAAI,GAAG,cAAc;AAG3B,MAAMC,IAAI,GAAGC,OAAO,KAAK;EACrBC,IAAI,EAAEH,IAAI;EACVE;AACJ,CAAC,CAAC;AAGF,OAAO,MAAME,UAAU,GAAIC,EAAE,IAAK,MAAMC,QAAQ,IAAI;EAChDC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;EAC/B,MAAMC,QAAQ,GAAG,MAAMV,SAAS,CAAE,gBAAeM,EAAG,UAAS,CAAC;EAE9D,IAAII,QAAQ,CAACC,EAAE,EAAC;IACZH,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;IACjC,MAAMG,OAAO,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;IACrCN,QAAQ,CAACL,IAAI,CAACU,OAAO,CAAC,CAAC;IACvBJ,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEG,OAAO,CAAC;IAC1C,OAAOA,OAAO;EAClB;EACA,OAAOF,QAAQ;AACnB,CAAC;AAED,MAAMI,WAAW,GAAG;EAACC,KAAK,EAAC,CAAC,CAAC;EAAEC,IAAI,EAAE,CAAC;AAAC,CAAC;AAExC,MAAMC,aAAa,GAAG,YAAiC;EAAA,IAAhCC,KAAK,uEAAGJ,WAAW;EAAA,IAAEK,MAAM;EAC9C,QAAQA,MAAM,CAACf,IAAI;IACf,KAAKH,IAAI;MAAC;QAEN,MAAMmB,QAAQ,GAAG;UAAC,GAAGF,KAAK;UAAEH,KAAK,EAAE,CAAC;QAAC,CAAC;QACtC,IAAIM,gBAAgB,GAAG,CAAC,CAAC;QACzBF,MAAM,CAAChB,OAAO,CAACmB,OAAO,CAACC,MAAM,IAAI;UAC7BF,gBAAgB,CAACE,MAAM,CAACjB,EAAE,CAAC,GAAGiB,MAAM;QACxC,CAAC,CAAC;QACFH,QAAQ,CAACL,KAAK,GAAGM,gBAAgB;QACjC,OAAOD,QAAQ;MACnB;IACA;MACI,OAAOF,KAAK;EAAA;AAExB,CAAC;AAED,eAAeD,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}