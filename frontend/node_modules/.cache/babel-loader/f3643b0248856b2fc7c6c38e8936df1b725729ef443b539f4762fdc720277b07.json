{"ast":null,"code":"import _regeneratorRuntime from\"/home/marc/exercise/projects/airbnb/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/marc/exercise/projects/airbnb/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/marc/exercise/projects/airbnb/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import{useModal}from\"../../context/Modal\";import*as sessionActions from\"../../store/session\";import'./SignupForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function SignupFormModal(){var dispatch=useDispatch();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),firstName=_useState6[0],setFirstName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),lastName=_useState8[0],setLastName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),password=_useState10[0],setPassword=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),confirmPassword=_useState12[0],setConfirmPassword=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),errors=_useState14[0],setErrors=_useState14[1];var _useModal=useModal(),closeModal=_useModal.closeModal;var handleSubmit=function handleSubmit(e){e.preventDefault();if(password===confirmPassword){setErrors([]);return dispatch(sessionActions.signup({email:email,username:username,firstName:firstName,lastName:lastName,password:password})).then(closeModal).catch(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.json();case 2:data=_context.sent;if(data&&data.errors)setErrors(data.errors);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}return setErrors(['Confirm Password field must be the same as the Password field']);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"ul\",{children:errors.map(function(error,idx){return/*#__PURE__*/_jsx(\"li\",{children:error},idx);})}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Username\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"First Name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:firstName,onChange:function onChange(e){return setFirstName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Last Name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:lastName,onChange:function onChange(e){return setLastName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Confirm Password\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})]})]});}export default SignupFormModal;","map":{"version":3,"names":["React","useState","useDispatch","useModal","sessionActions","SignupFormModal","dispatch","email","setEmail","username","setUsername","firstName","setFirstName","lastName","setLastName","password","setPassword","confirmPassword","setConfirmPassword","errors","setErrors","closeModal","handleSubmit","e","preventDefault","signup","then","catch","res","json","data","map","error","idx","target","value"],"sources":["/home/marc/exercise/projects/airbnb/frontend/src/components/SignupFormModal/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useModal } from \"../../context/Modal\";\nimport * as sessionActions from \"../../store/session\";\nimport './SignupForm.css';\n\nfunction SignupFormModal() {\n  const dispatch = useDispatch();\n  const [email, setEmail] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [errors, setErrors] = useState([]);\n  const { closeModal } = useModal();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (password === confirmPassword) {\n      setErrors([]);\n      return dispatch(sessionActions.signup({ email, username, firstName, lastName, password }))\n        .then(closeModal)\n        .catch(async (res) => {\n          const data = await res.json();\n          if (data && data.errors) setErrors(data.errors);\n        });\n    }\n    return setErrors(['Confirm Password field must be the same as the Password field']);\n  };\n\n  return (\n    <>\n      <h1>Sign Up</h1>\n      <form onSubmit={handleSubmit}>\n        <ul>\n          {errors.map((error, idx) => <li key={idx}>{error}</li>)}\n        </ul>\n        <label>\n          Email\n          <input\n            type=\"text\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n          />\n        </label>\n        <label>\n          Username\n          <input\n            type=\"text\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            required\n          />\n        </label>\n        <label>\n          First Name\n          <input\n            type=\"text\"\n            value={firstName}\n            onChange={(e) => setFirstName(e.target.value)}\n            required\n          />\n        </label>\n        <label>\n          Last Name\n          <input\n            type=\"text\"\n            value={lastName}\n            onChange={(e) => setLastName(e.target.value)}\n            required\n          />\n        </label>\n        <label>\n          Password\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n          />\n        </label>\n        <label>\n          Confirm Password\n          <input\n            type=\"password\"\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n            required\n          />\n        </label>\n        <button type=\"submit\">Sign Up</button>\n      </form>\n    </>\n  );\n}\n\nexport default SignupFormModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}