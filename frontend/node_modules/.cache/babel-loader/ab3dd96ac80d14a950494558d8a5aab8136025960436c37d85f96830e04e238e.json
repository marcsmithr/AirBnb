{"ast":null,"code":"import _slicedToArray from\"/home/marc/exercise/projects/airbnb/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import{useDispatch}from'react-redux';import*as sessionActions from'../../store/session';import OpenModalMenuItem from'./OpenModalMenuItem';import LoginFormModal from'../LoginFormModal';import SignupFormModal from'../SignupFormModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ProfileButton(_ref){var user=_ref.user;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMenu=_useState2[0],setShowMenu=_useState2[1];var ulRef=useRef();var openMenu=function openMenu(){if(showMenu)return;setShowMenu(true);};useEffect(function(){if(!showMenu)return;var closeMenu=function closeMenu(e){if(!ulRef.current.contains(e.target)){setShowMenu(false);}};document.addEventListener('click',closeMenu);return function(){return document.removeEventListener(\"click\",closeMenu);};},[showMenu]);var closeMenu=function closeMenu(){return setShowMenu(false);};var logout=function logout(e){e.preventDefault();dispatch(sessionActions.logout());closeMenu();};var ulClassName=\"profile-dropdown\"+(showMenu?\"\":\" hidden\");return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:openMenu,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-circle\"})}),/*#__PURE__*/_jsx(\"ul\",{className:ulClassName,ref:ulRef,children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:user.username}),/*#__PURE__*/_jsxs(\"li\",{children:[user.firstName,\" \",user.lastName]}),/*#__PURE__*/_jsx(\"li\",{children:user.email}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Log Out\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(OpenModalMenuItem,{itemText:\"Log In\",onItemClick:closeMenu,modalComponent:/*#__PURE__*/_jsx(LoginFormModal,{})}),/*#__PURE__*/_jsx(OpenModalMenuItem,{itemText:\"Sign Up\",onItemClick:closeMenu,modalComponent:/*#__PURE__*/_jsx(SignupFormModal,{})})]})})]});}export default ProfileButton;","map":{"version":3,"names":["React","useState","useEffect","useRef","useDispatch","sessionActions","OpenModalMenuItem","LoginFormModal","SignupFormModal","ProfileButton","user","dispatch","showMenu","setShowMenu","ulRef","openMenu","closeMenu","e","current","contains","target","document","addEventListener","removeEventListener","logout","preventDefault","ulClassName","username","firstName","lastName","email"],"sources":["/home/marc/exercise/projects/airbnb/frontend/src/components/Navigation/ProfileButton.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useDispatch } from 'react-redux';\nimport * as sessionActions from '../../store/session';\nimport OpenModalMenuItem from './OpenModalMenuItem';\nimport LoginFormModal from '../LoginFormModal';\nimport SignupFormModal from '../SignupFormModal';\n\nfunction ProfileButton({ user }) {\n  const dispatch = useDispatch();\n  const [showMenu, setShowMenu] = useState(false);\n  const ulRef = useRef();\n\n  const openMenu = () => {\n    if (showMenu) return;\n    setShowMenu(true);\n  };\n\n  useEffect(() => {\n    if (!showMenu) return;\n\n    const closeMenu = (e) => {\n      if (!ulRef.current.contains(e.target)) {\n        setShowMenu(false);\n      }\n    };\n\n    document.addEventListener('click', closeMenu);\n\n    return () => document.removeEventListener(\"click\", closeMenu);\n  }, [showMenu]);\n\n  const closeMenu = () => setShowMenu(false);\n\n  const logout = (e) => {\n    e.preventDefault();\n    dispatch(sessionActions.logout());\n    closeMenu();\n  };\n\n  const ulClassName = \"profile-dropdown\" + (showMenu ? \"\" : \" hidden\");\n\n  return (\n    <>\n      <button onClick={openMenu}>\n        <i className=\"fas fa-user-circle\" />\n      </button>\n      <ul className={ulClassName} ref={ulRef}>\n        {user ? (\n          <>\n            <li>{user.username}</li>\n            <li>{user.firstName} {user.lastName}</li>\n            <li>{user.email}</li>\n            <li>\n              <button onClick={logout}>Log Out</button>\n            </li>\n          </>\n        ) : (\n          <>\n            <OpenModalMenuItem\n              itemText=\"Log In\"\n              onItemClick={closeMenu}\n              modalComponent={<LoginFormModal />}\n            />\n            <OpenModalMenuItem\n              itemText=\"Sign Up\"\n              onItemClick={closeMenu}\n              modalComponent={<SignupFormModal />}\n            />\n          </>\n        )}\n      </ul>\n    </>\n  );\n}\n\nexport default ProfileButton;\n"],"mappings":"kIAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,GAAKC,eAAc,KAAM,qBAAqB,CACrD,MAAOC,kBAAiB,KAAM,qBAAqB,CACnD,MAAOC,eAAc,KAAM,mBAAmB,CAC9C,MAAOC,gBAAe,KAAM,oBAAoB,CAAC,6IAEjD,QAASC,cAAa,MAAW,IAARC,KAAI,MAAJA,IAAI,CAC3B,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAC9B,cAAgCH,QAAQ,CAAC,KAAK,CAAC,wCAAxCW,QAAQ,eAAEC,WAAW,eAC5B,GAAMC,MAAK,CAAGX,MAAM,EAAE,CAEtB,GAAMY,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACrB,GAAIH,QAAQ,CAAE,OACdC,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAEDX,SAAS,CAAC,UAAM,CACd,GAAI,CAACU,QAAQ,CAAE,OAEf,GAAMI,UAAS,CAAG,QAAZA,UAAS,CAAIC,CAAC,CAAK,CACvB,GAAI,CAACH,KAAK,CAACI,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,MAAM,CAAC,CAAE,CACrCP,WAAW,CAAC,KAAK,CAAC,CACpB,CACF,CAAC,CAEDQ,QAAQ,CAACC,gBAAgB,CAAC,OAAO,CAAEN,SAAS,CAAC,CAE7C,MAAO,kBAAMK,SAAQ,CAACE,mBAAmB,CAAC,OAAO,CAAEP,SAAS,CAAC,GAC/D,CAAC,CAAE,CAACJ,QAAQ,CAAC,CAAC,CAEd,GAAMI,UAAS,CAAG,QAAZA,UAAS,SAASH,YAAW,CAAC,KAAK,CAAC,GAE1C,GAAMW,OAAM,CAAG,QAATA,OAAM,CAAIP,CAAC,CAAK,CACpBA,CAAC,CAACQ,cAAc,EAAE,CAClBd,QAAQ,CAACN,cAAc,CAACmB,MAAM,EAAE,CAAC,CACjCR,SAAS,EAAE,CACb,CAAC,CAED,GAAMU,YAAW,CAAG,kBAAkB,EAAId,QAAQ,CAAG,EAAE,CAAG,SAAS,CAAC,CAEpE,mBACE,wCACE,eAAQ,OAAO,CAAEG,QAAS,uBACxB,UAAG,SAAS,CAAC,oBAAoB,EAAG,EAC7B,cACT,WAAI,SAAS,CAAEW,WAAY,CAAC,GAAG,CAAEZ,KAAM,UACpCJ,IAAI,cACH,wCACE,oBAAKA,IAAI,CAACiB,QAAQ,EAAM,cACxB,sBAAKjB,IAAI,CAACkB,SAAS,KAAGlB,IAAI,CAACmB,QAAQ,GAAM,cACzC,oBAAKnB,IAAI,CAACoB,KAAK,EAAM,cACrB,iCACE,eAAQ,OAAO,CAAEN,MAAO,qBAAiB,EACtC,GACJ,cAEH,wCACE,KAAC,iBAAiB,EAChB,QAAQ,CAAC,QAAQ,CACjB,WAAW,CAAER,SAAU,CACvB,cAAc,cAAE,KAAC,cAAc,IAAI,EACnC,cACF,KAAC,iBAAiB,EAChB,QAAQ,CAAC,SAAS,CAClB,WAAW,CAAEA,SAAU,CACvB,cAAc,cAAE,KAAC,eAAe,IAAI,EACpC,GAEL,EACE,GACJ,CAEP,CAEA,cAAeP,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}